@startuml
!theme plain
skinparam classAttributeIconSize 0

' Abstract Classes
abstract class Person {
    - String id
    - String firstName
    - String lastName
    - String email
    + String getId()
    + String getFirstName()
    + void setFirstName(String)
    + String getLastName()
    + void setLastName(String)
    + String getEmail()
    + void setEmail(String)
    + String getFullName()
    + {abstract} String role()
    + {abstract} String displayProfile()
}

' Concrete Classes
class Student {
    - String major
    - int year
    - Transcript transcript
    - List<Enrollment> currentEnrollments
    + String getMajor()
    + int getYear()
    + Transcript getTranscript()
    + List<Enrollment> getCurrentEnrollments()
    + void setMajor(String)
    + void setYear(int)
    + void addEnrollment(Enrollment)
    + boolean removeEnrollment(Enrollment)
}

class Instructor {
    - String department
    - String officeNumber
    - List<Section> assignedSections
    + String getDepartment()
    + String getOfficeNumber()
    + List<Section> getAssignedSections()
    + void setDepartment(String)
    + void setOfficeNumber(String)
    + void addAssignedSection(Section)
    + boolean removeAssignedSection(Section)
}

class Admin {
}

class Course {
    - String code
    - String title
    - int credits
    - List<String> prerequisites
    + String getCode()
    + String getTitle()
    + int getCredits()
    + List<String> getPrerequisites()
    + void setTitle(String)
    + void setCredits(int)
    + void addPrerequisite(String)
    + void removePrerequisite(String)
    + boolean matchesKeyword(String)
}

class Section {
    - String id
    - Course course
    - String term
    - Instructor instructor
    - int capacity
    - int waitlistCapacity
    - List<TimeSlot> meetingTimes
    - List<Enrollment> roster
    + String getId()
    + Course getCourse()
    + String getTerm()
    + Instructor getInstructor()
    + int getCapacity()
    + List<TimeSlot> getMeetingTimes()
    + List<Enrollment> getRoster()
    + void setInstructor(Instructor)
    + void setCapacity(int)
    + boolean isFull()
    + boolean isWaitlistFull()
    + void addMeetingTime(TimeSlot)
    + void addEnrollment(Enrollment)
}

class Enrollment {
    - Student student
    - Section section
    - EnrollmentStatus status
    - Optional<Grade> grade
    + Student getStudent()
    + Section getSection()
    + EnrollmentStatus getStatus()
    + Optional<Grade> getGrade()
    + void setStatus(EnrollmentStatus)
    + void assignGrade(Grade)
    + boolean hasGrade()
}

enum EnrollmentStatus {
    ENROLLED
    DROPPED
    WAITLISTED
}

class Transcript {
    - Student student
    - List<TranscriptEntry> entries
    + Student getStudent()
    + List<TranscriptEntry> getEntries()
    + void addEntry(TranscriptEntry)
    + int getTotalCredits()
    + double getTotalQualityPoints()
    + double getGpa()
}

class TranscriptEntry {
    - Section section
    - Grade grade
    + Section getSection()
    + Grade getGrade()
    + int getCredits()
    + double getQualityPoints()
}

class TimeSlot {
    - DayOfWeek dayOfWeek
    - LocalTime start
    - LocalTime end
    - String room
    + DayOfWeek getDayOfWeek()
    + LocalTime getStart()
    + LocalTime getEnd()
    + String getRoom()
    + boolean overlaps(TimeSlot)
}

enum Grade {
    A
    B
    C
    D
    F
    I
    W
    + double getPoints()
    + boolean countsTowardsGpa()
}

' Interfaces
interface Repository<T, ID> {
    + Optional<T> findById(ID)
    + List<T> findAll()
    + T save(T)
    + void deleteById(ID)
}

interface Schedulable {
    + List<TimeSlot> getMeetingTimes()
}

interface Searchable {
    + boolean matchesKeyword(String)
}

interface Gradable {
    + void assignGrade(Grade)
    + Optional<Grade> getGrade()
    + boolean hasGrade()
}

interface Specification<T> {
    + boolean isSatisfiedBy(T)
}

class CourseSpecification {
    - String code
    - String title
    - Integer minCredits
    - Integer maxCredits
    - String instructorName
    - DayOfWeek dayOfWeek
    - LocalTime startTime
    - LocalTime endTime
    - SectionRepository sectionRepository
    + boolean isSatisfiedBy(Course)
    + static CourseSpecification fromQuery(CourseQuery, SectionRepository)
}

' Inheritance Relationships
Person <|-- Student
Person <|-- Instructor
Person <|-- Admin

' Implementation Relationships
Section ..|> Schedulable
Course ..|> Searchable
Enrollment ..|> Gradable
CourseSpecification ..|> Specification

' Associations
Course "1" *-- "*" Section : contains
Section "*" o-- "*" Enrollment : has
Student "1" *-- "1" Transcript : has
Transcript "1" *-- "*" TranscriptEntry : contains
Section "*" o-- "*" TimeSlot : has
Section "*" o-- "1" Instructor : assigned to
Enrollment "*" o-- "1" Student : belongs to
Enrollment "*" o-- "1" Section : enrolls in
TranscriptEntry "*" o-- "1" Section : references
Enrollment "*" o-- "1" Grade : receives
TranscriptEntry "*" o-- "1" Grade : contains
Enrollment "*" o-- "1" EnrollmentStatus : has

' Note: Repository interface is generic and implemented by various repository classes
' (CourseRepository, StudentRepository, etc.) but not shown in detail here

@enduml

